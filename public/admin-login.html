<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Visa Global — Admin Login</title>
  <link rel="stylesheet" href="/public/app.css"/>
</head>
<body>
  <div class="adminWrap">
    <h2 style="margin:0 0 10px;font-family:Georgia,'Times New Roman',serif;">Visa Global — Admin Login</h2>
    <p class="small">Authorized personnel only.</p>

    <div class="panel" style="max-width:520px;">
      <div class="row">
        <input id="u" class="input" placeholder="Username" autocomplete="username"/>
        <input id="p" class="input" placeholder="Password" type="password" autocomplete="current-password"/>
        <button id="login" class="primary" style="min-width:220px;">SIGN IN</button>
        <div id="m" class="small"></div>
      </div>
    </div>
  </div>

<script>
  const u=document.getElementById('u');
  const p=document.getElementById('p');
  const m=document.getElementById('m');
  const b=document.getElementById('login');

  async function go(){
    m.textContent="";
    b.disabled=true; b.textContent="SIGNING IN...";
    try{
      const r = await fetch("/api/admin/login", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ username:u.value.trim(), password:p.value })
      });
      const d = await r.json();
      if(!d.ok){ m.textContent = d.message || "Login failed"; return; }
      location.href="/admin";
    }catch(e){ m.textContent="Connection error"; }
    finally{ b.disabled=false; b.textContent="SIGN IN"; }
  }
  b.addEventListener("click", go);
  p.addEventListener("keydown",(e)=>{ if(e.key==="Enter") go(); });
</script>
</body>
</html>
